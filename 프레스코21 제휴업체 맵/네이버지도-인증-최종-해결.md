# 네이버 지도 API 인증 실패 최종 해결 방법

## 🔴 현재 상황

- ✅ 서버 정상 실행 (localhost:8080)
- ✅ Web Service URL 등록 완료 (http://localhost, http://localhost:8080)
- ✅ 시크릿 모드에서 테스트
- ❌ 여전히 "네이버 지도 Open API 인증이 실패했습니다" 에러

---

## 🔍 정확한 원인 파악 (중요!)

### Step 1: 브라우저 개발자 도구에서 확인

1. **F12** 누르기 (개발자 도구 열기)

2. **Network 탭** 클릭

3. 페이지 새로고침 (Cmd+R)

4. **maps.js** 파일 찾기 (네이버 지도 API 스크립트)

5. **상태 코드 확인:**
   - 200 = 정상 로드 ✅
   - 401/403 = 인증 실패 ❌
   - 404 = 파일 없음 ❌

6. **Response 탭** 클릭하여 응답 내용 확인:
   - 에러 메시지가 있는지 확인
   - "Unauthorized" 메시지가 있는지 확인

---

### Step 2: 네이버 클라우드 플랫폼 콘솔 재확인

#### 2-1. Application 이름 확인

콘솔에서:
- Application 이름: **"Pressco21-Maps"** (스크린샷 기준)
- Client ID: **bfp8odep5r**

이것이 HTML 파일의 Client ID와 일치하는지 확인하세요.

#### 2-2. Web Service URL 정확히 확인

**등록된 URL들:**
- ✅ https://foreverlove.co.kr/
- ✅ http://foreverlove.co.kr
- ✅ http://localhost
- ✅ https://jiho5755-maker.github.io
- ✅ http://localhost:8080

**중요 체크리스트:**
- [ ] `http://localhost` 끝에 슬래시(/) 없음
- [ ] `http://localhost:8080` 끝에 슬래시(/) 없음
- [ ] 프로토콜(`http://`) 정확히 입력됨
- [ ] 저장/적용 버튼 클릭 완료

#### 2-3. API 선택 확인

**선택된 API:**
- ✅ Dynamic Map (체크됨)
- ✅ Geocoding (체크됨)

이것이 올바르게 선택되어 있는지 확인하세요.

---

## 🔧 해결 방법

### 방법 1: URL 등록 후 충분한 대기 시간 (가장 중요!)

네이버 클라우드 플랫폼에서 URL 등록 후 **적용되는데 최소 10~30분**이 걸릴 수 있습니다.

1. URL 등록 후 **최소 30분 대기**
2. 브라우저 완전 종료 후 재시작
3. 시크릿 모드에서 재테스트

---

### 방법 2: 네이버 클라우드 플랫폼 콘솔에서 저장 확인

1. 콘솔에서 Web Service URL 섹션으로 이동
2. URL이 등록되어 있는지 확인
3. **페이지 하단 또는 상단의 "저장" 또는 "적용" 버튼** 찾기
4. 클릭하여 저장 완료
5. "저장되었습니다" 또는 "적용되었습니다" 메시지 확인

---

### 방법 3: Client ID 재확인

1. 네이버 클라우드 플랫폼 콘솔
2. Maps → Application → "Pressco21-Maps" 클릭
3. 상단에 표시된 **Client ID** 정확히 복사
4. HTML 파일 14번째 줄의 Client ID와 비교:
   ```html
   script.src = 'https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=bfp8odep5r&t=' + Date.now();
   ```
5. 일치하지 않으면 HTML 파일 수정

---

### 방법 4: URL 형식 재확인

네이버 클라우드 플랫폼 콘솔에서:

1. 기존 `http://localhost:8080` 삭제
2. 새로 추가:
   ```
   http://localhost:8080
   ```
   (끝에 슬래시 없이!)
3. 저장
4. 30분 대기

---

### 방법 5: 다른 Application 사용 또는 새로 만들기

기존 Application에 문제가 있을 수 있습니다.

1. 네이버 클라우드 플랫폼 콘솔
2. Maps → Application → 새 Application 등록
3. Application 이름: "Pressco21-Maps-Test"
4. API 선택: Dynamic Map, Geocoding
5. Web Service URL 추가: `http://localhost:8080`
6. 저장
7. 새 Client ID 확인
8. HTML 파일의 Client ID 수정
9. 30분 대기 후 테스트

---

## 📋 최종 확인 체크리스트

### 네이버 클라우드 플랫폼
- [ ] Application 이름 확인 (Pressco21-Maps)
- [ ] Client ID 확인 (bfp8odep5r)
- [ ] Dynamic Map API 선택됨
- [ ] Web Service URL에 `http://localhost:8080` 등록됨 (슬래시 없이)
- [ ] 저장/적용 버튼 클릭 완료
- [ ] "저장되었습니다" 메시지 확인
- [ ] URL 등록 후 30분 이상 대기

### HTML 파일
- [ ] Client ID가 콘솔의 Client ID와 정확히 일치
- [ ] 파일 저장 완료

### 브라우저
- [ ] 시크릿 모드 사용
- [ ] URL 정확히 입력: `http://localhost:8080/제휴업체-지도-통합본.html`
- [ ] F12 → Network 탭 → maps.js 파일 상태 코드 확인
- [ ] Response 탭에서 에러 메시지 확인

---

## 🆘 여전히 안 되면

### 네이버 클라우드 플랫폼 고객센터 문의

**전화**: 1544-7876

**문의 내용**:
```
Maps API 사용 중 인증 실패 에러 발생

Application 이름: Pressco21-Maps
Client ID: bfp8odep5r
Web Service URL: http://localhost:8080 등록 완료
등록 후 30분 이상 대기 완료
저장/적용 완료

하지만 localhost:8080에서 테스트 시 여전히 인증 실패 발생
에러 메시지: "네이버 지도 Open API 인증이 실패했습니다"

원인 확인 부탁드립니다.
```

---

## 💡 참고사항

### 네이버 지도 API 인증 실패의 일반적인 원인

1. **URL 미등록** (가장 흔함)
2. **URL 등록 후 대기 시간 부족** (10~30분 필요)
3. **URL 형식 오류** (슬래시, 프로토콜 등)
4. **저장/적용 버튼 미클릭**
5. **Client ID 오류**
6. **API 선택 오류** (Dynamic Map 미선택)

현재 상황에서는 **URL 등록 후 대기 시간**이 가장 가능성이 높습니다.

---

## ✅ 성공 확인

다음이 모두 확인되면 성공:

1. ✅ Network 탭에서 maps.js 파일이 200 상태로 로드됨
2. ✅ 콘솔에 네이버 지도 API 인증 오류 없음
3. ✅ 네이버 지도가 정상적으로 표시됨
4. ✅ 마커가 표시됨 (데이터가 있는 경우)

