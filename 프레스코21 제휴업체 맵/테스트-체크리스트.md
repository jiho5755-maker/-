# 제휴업체 지도 테스트 체크리스트

## 현재 상황 진단

브라우저 콘솔(F12)을 열고 다음을 확인하세요:

### 1. 로컬 서버 확인
- ✅ 주소창이 `http://localhost:8080`으로 시작하는지 확인
- ❌ `file:///`로 시작하면 안 됩니다!

### 2. 브라우저 캐시 문제 해결
- **Mac**: Cmd + Shift + R (강제 새로고침)
- **Windows**: Ctrl + Shift + R (강제 새로고침)
- 또는 개발자 도구(F12) > Network 탭 > "Disable cache" 체크

### 3. 콘솔 로그 확인
브라우저 콘솔에서 다음 메시지들을 확인하세요:

#### ✅ 정상적인 경우:
```
[제휴업체지도] DOM 로드 완료
[제휴업체지도] 데이터 로드 시작 https://script.google.com/...
[제휴업체지도] 응답 수신: {status: 200, ok: true}
[제휴업체지도] 데이터 파싱 완료: {success: true, partners: Array(...), count: 1}
[제휴업체지도] 마커 생성 시작
[제휴업체지도] 로드 완료: 1개 업체
```

#### ❌ 오류가 있는 경우:

**오류 1: "Failed to fetch" 또는 "NetworkError"**
- Google Apps Script 웹 앱 배포가 안 되어 있음
- 배포 > 새 배포 > 액세스 권한: "모든 사용자"

**오류 2: "네이버 지도 Open API 인증이 실패했습니다"**
- 로컬 서버를 사용하고 있는지 확인 (http://localhost:8080)
- file:// 경로로 열면 안 됩니다!

**오류 3: "partners 배열이 없습니다"**
- Google Apps Script의 doGet 함수 확인
- testDoGet 함수 실행하여 데이터 확인

**오류 4: "표시할 업체가 없습니다"**
- 스프레드시트에서 N열(심사상태)이 "승인"인지 확인
- O, P열(위도/경도)에 값이 있는지 확인

### 4. Network 탭 확인
1. F12 > Network 탭
2. 페이지 새로고침 (Cmd+R 또는 Ctrl+R)
3. API URL (script.google.com으로 시작) 찾기
4. 상태 코드 확인:
   - 200 = 성공 ✅
   - 401/403 = 권한 오류 ❌
   - 404 = URL 오류 ❌

### 5. 데이터 구조 확인
Google Apps Script에서 `testDoGet` 함수 실행:
1. Apps Script 편집기 열기
2. testDoGet 함수 선택
3. 실행
4. 실행 로그에서 JSON 데이터 확인

예상 출력:
```json
{
  "success": true,
  "partners": [
    {
      "name": "업체명",
      "category": "카테고리",
      "address": "주소",
      "lat": 37.5015,
      "lng": 127.1222,
      ...
    }
  ],
  "count": 1
}
```

---

## 빠른 문제 해결

### 문제: 데이터가 로드되지 않음

1. **브라우저 캐시 삭제**
   - Cmd + Shift + R (Mac) 또는 Ctrl + Shift + R (Windows)

2. **로컬 서버 재시작**
   ```bash
   # 터미널에서
   cd "/Users/jangjiho/Desktop/커서AI/프레스코21 제휴업체 맵"
   python3 -m http.server 8080
   ```

3. **Google Apps Script 배포 확인**
   - 배포 > 새 배포 또는 기존 배포 수정
   - 액세스 권한: "모든 사용자" 확인

4. **콘솔 에러 확인**
   - F12 > Console 탭
   - 빨간색 에러 메시지 확인

### 문제: 네이버 지도가 표시되지 않음

1. **주소창 확인**: `http://localhost:8080`으로 시작해야 함
2. **네이버 지도 API Client ID 확인**: HTML 파일 9번째 줄
3. **네이버 클라우드 플랫폼에서 도메인 등록**: localhost는 기본 허용

---

## 완전 초기화 방법

1. 브라우저 완전 종료 후 재실행
2. 로컬 서버 중지 (Ctrl+C) 후 재시작
3. 브라우저 시크릿 모드에서 테스트
4. 다른 브라우저에서 테스트 (Chrome, Firefox, Safari)

