# 제휴업체 지도 개선 완료 사항

## ✅ 완료된 개선 사항

### 1. InfoWindow 닫기 버튼 추가
- **변경**: InfoWindow 우측 상단에 X 닫기 버튼 추가
- **위치**: 이미지 위에 반투명 원형 버튼
- **동작**: 클릭 시 InfoWindow 닫힘

### 2. 전화 버튼: 전화번호 표시
- **변경 전**: `📞 전화`
- **변경 후**: `📞 010-1234-5678` (실제 전화번호 표시)
- **동작**: 클릭 시 전화 걸기 (모바일)

### 3. 링크 버튼: 여러 링크 멀티 표시
- **구분자 지원**: 쉼표(,), 파이프(|), 줄바꿈(\n)
- **자동 인식**: 링크 종류에 따라 아이콘과 텍스트 자동 변경
  - 인스타그램: `📷 인스타그램`
  - 페이스북: `📘 페이스북`
  - 블로그: `📝 블로그`
  - 유튜브: `▶️ 유튜브`
  - 홈페이지: `🏠 홈페이지`
  - 기타: `🔗 방문` 또는 `🔗 링크 1`, `🔗 링크 2`

### 4. 긴 텍스트 처리 개선
- **업체명**: 최대 180px, 줄바꿈 허용
- **한 줄 소개**: 2줄까지 표시, 초과 시 말줄임표(...)
- **주소/운영시간**: 긴 텍스트 자동 줄바꿈
- **CSS**: `word-break: keep-all`, `overflow-wrap: break-word` 적용

### 5. 이미지 표시 개선
- **에러 처리**: 이미지 로드 실패 시 자동으로 placeholder(🏢) 표시
- **구글 드라이브 URL**: 자동 변환 지원 유지

### 6. 버튼 레이아웃 개선
- **여러 버튼**: flex-wrap으로 자동 줄바꿈
- **최소 너비**: 각 버튼 최소 50% 너비 (2개씩 한 줄)
- **말줄임표**: 버튼 텍스트가 길면 자동으로 `...` 표시

---

## 📊 구글 시트 데이터 형식 안내

### K열 (링크): 여러 링크 입력 방법

**방법 1: 쉼표(,)로 구분**
```
https://example.com/home, https://instagram.com/account, https://blog.naver.com/blog
```

**방법 2: 파이프(|)로 구분**
```
https://example.com/home | https://instagram.com/account | https://blog.naver.com/blog
```

**방법 3: 줄바꿈으로 구분 (셀 내 Alt+Enter)**
```
https://example.com/home
https://instagram.com/account
https://blog.naver.com/blog
```

### M열 (이미지): 구글 드라이브 URL

**지원 형식:**
1. 공유 링크: `https://drive.google.com/file/d/FILE_ID/view`
2. Open 링크: `https://drive.google.com/open?id=FILE_ID`
3. 직접 링크: `https://drive.google.com/uc?export=view&id=FILE_ID`

**이미지가 안 나오면:**
- 구글 드라이브에서 파일 우클릭 → "공유" → "링크가 있는 모든 사용자" 선택
- 또는 이미지를 구글 드라이브 대신 imgur.com 등에 업로드

---

## 🧪 테스트 방법

### 1. GitHub에 업로드
```bash
# 파일 업로드 후 1~2분 대기
```

### 2. 테스트 항목

#### A. 닫기 버튼 테스트
- [ ] 마커 클릭하여 InfoWindow 열기
- [ ] 우측 상단 X 버튼 보이는지 확인
- [ ] X 버튼 클릭 시 InfoWindow 닫히는지 확인

#### B. 전화번호 표시 테스트
- [ ] 전화번호가 `📞 010-1234-5678` 형태로 표시되는지 확인
- [ ] 모바일에서 클릭 시 전화 앱 실행되는지 확인

#### C. 여러 링크 테스트
- [ ] 구글 시트 K열에 여러 링크 입력 (쉼표 구분)
- [ ] InfoWindow에 각 링크가 별도 버튼으로 표시되는지 확인
- [ ] 인스타그램/블로그 등 자동 인식되는지 확인
- [ ] 각 버튼 클릭 시 올바른 링크로 이동하는지 확인

#### D. 긴 텍스트 테스트
- [ ] 업체명이 길 경우 줄바꿈되는지 확인
- [ ] 한 줄 소개가 2줄 초과 시 말줄임표 표시되는지 확인
- [ ] 주소가 길 경우 자동 줄바꿈되는지 확인

#### E. 이미지 테스트
- [ ] 구글 드라이브 이미지가 표시되는지 확인
- [ ] 이미지 없는 경우 🏢 아이콘 표시되는지 확인
- [ ] 잘못된 이미지 URL인 경우 🏢 아이콘으로 대체되는지 확인

---

## 🔄 다음 개선 계획

### 1. 검색 기능
- 업체명 검색
- 검색 결과로 지도 이동
- 검색 결과 강조

### 2. 필터 기능
- 지역별 필터 (도로명 주소에서 자동 추출)
- 카테고리별 필터 (C열 데이터)
- 협회별 필터 (구글 시트에 열 추가 필요)

### 3. UI/UX 개선
- 사이드바 추가 (검색 + 필터)
- 업체 목록 표시
- 모바일 반응형 개선

---

## 📝 참고사항

### 구글 시트 데이터 구조
- A열: 타임스탬프
- B열: 업체명
- C열: 카테고리
- F열: 도로명 주소
- G열: 상세 주소
- H열: 대표 전화번호
- J열: 운영 시간
- **K열: 홈페이지/블로그/인스타 링크** (여러 개 가능)
- L열: 업체 한 줄 소개
- **M열: 업체 대표 이미지** (구글 드라이브 URL)
- N열: 심사상태 ('승인'만 지도 표시)
- O열: 위도 (자동 생성)
- P열: 경도 (자동 생성)

### 링크 예시
```
# 단일 링크
https://example.com

# 여러 링크 (쉼표)
https://example.com, https://instagram.com/account

# 여러 링크 (파이프)
https://example.com | https://blog.naver.com/blog

# 여러 링크 (줄바꿈 - 셀 내 Alt+Enter)
https://example.com
https://instagram.com/account
https://blog.naver.com/blog
```

