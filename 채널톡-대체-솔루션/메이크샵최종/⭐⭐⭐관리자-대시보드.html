<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRESSCO21 ìƒë‹´ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
background:#F8FAF7;color:#333}
.header{background:#8B9D83;color:#fff;padding:20px 30px;
box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.header h1{font-size:24px;margin-bottom:5px}
.header p{font-size:14px;opacity:0.9}
.container{max-width:1400px;margin:30px auto;padding:0 20px}
.stats{display:flex;gap:20px;margin-bottom:30px}
.stat-card{flex:1;background:#fff;padding:25px;border-radius:12px;
box-shadow:0 2px 8px rgba(0,0,0,0.08)}
.stat-card h3{font-size:14px;color:#666;margin-bottom:10px}
.stat-card .num{font-size:36px;font-weight:700;color:#8B9D83}
.stat-card .label{font-size:12px;color:#999;margin-top:5px}
.filters{background:#fff;padding:20px;border-radius:12px;
margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
.filters h2{font-size:18px;margin-bottom:15px}
.filter-row{display:flex;gap:15px;align-items:center}
.filter-row input,.filter-row select{padding:10px 15px;border:2px solid #E8EDE6;
border-radius:8px;font-size:14px}
.filter-row button{padding:10px 20px;background:#8B9D83;color:#fff;
border:none;border-radius:8px;font-size:14px;cursor:pointer;font-weight:600}
.filter-row button:hover{opacity:0.9}
.filter-row button.secondary{background:#E8EDE6;color:#555}
.inquiries{background:#fff;border-radius:12px;overflow:hidden;
box-shadow:0 2px 8px rgba(0,0,0,0.08)}
.inq-header{padding:20px;border-bottom:2px solid #E8EDE6;
display:flex;justify-content:space-between;align-items:center}
.inq-header h2{font-size:18px}
.inq-header .count{color:#8B9D83;font-weight:700}
.inq-item{padding:20px;border-bottom:1px solid #F0F0F0;cursor:pointer}
.inq-item:hover{background:#F8FAF7}
.inq-item.expanded{background:#F0F9FF}
.inq-top{display:flex;justify-content:space-between;align-items:start;margin-bottom:10px}
.inq-type{display:inline-block;padding:4px 12px;border-radius:12px;
font-size:12px;font-weight:600;margin-right:10px}
.inq-type.ship{background:#DBEAFE;color:#1E40AF}
.inq-type.ret{background:#FEE2E2;color:#991B1B}
.inq-type.mile{background:#FEF3C7;color:#92400E}
.inq-type.gen{background:#E0E7FF;color:#3730A3}
.inq-type.rating{background:#D1FAE5;color:#065F46}
.inq-session{font-size:12px;color:#999}
.inq-time{font-size:13px;color:#666}
.inq-data{margin-top:10px;padding:15px;background:#F8FAF7;
border-radius:8px;display:none}
.inq-item.expanded .inq-data{display:block}
.inq-data-row{margin-bottom:8px;font-size:14px}
.inq-data-row strong{color:#555;margin-right:8px}
.inq-history{margin-top:15px;padding-top:15px;border-top:1px solid #E8EDE6}
.inq-history-title{font-size:13px;font-weight:600;margin-bottom:10px;color:#666}
.inq-msg{font-size:13px;padding:8px 12px;border-radius:8px;margin-bottom:6px}
.inq-msg.bot{background:#fff;border:1px solid #E8EDE6}
.inq-msg.user{background:#8B9D83;color:#fff}
.empty{text-align:center;padding:60px 20px;color:#999}
.empty-icon{font-size:48px;margin-bottom:15px}
.actions{display:flex;gap:10px;margin-top:15px}
.btn{padding:8px 16px;border:none;border-radius:6px;font-size:13px;
cursor:pointer;font-weight:600}
.btn-primary{background:#8B9D83;color:#fff}
.btn-secondary{background:#E8EDE6;color:#555}
.btn:hover{opacity:0.9}
.export-all{margin-bottom:20px;text-align:right}
@media (max-width:768px){
.stats{flex-direction:column}
.filter-row{flex-direction:column;align-items:stretch}
}
</style>
</head>
<body>
<div class="header">
<h1>ğŸ¯ PRESSCO21 ìƒë‹´ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
<p>ê³ ê° ë¬¸ì˜ ë‚´ì—­ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</p>
</div>
<div class="container">
<div class="stats">
<div class="stat-card">
<h3>ì „ì²´ ë¬¸ì˜</h3>
<div class="num" id="totalCount">0</div>
<div class="label">ì´ ì ‘ìˆ˜ ê±´ìˆ˜</div>
</div>
<div class="stat-card">
<h3>ì˜¤ëŠ˜ ë¬¸ì˜</h3>
<div class="num" id="todayCount">0</div>
<div class="label">ê¸ˆì¼ ì ‘ìˆ˜ ê±´ìˆ˜</div>
</div>
<div class="stat-card">
<h3>í‰ê·  ë§Œì¡±ë„</h3>
<div class="num" id="avgRating">-</div>
<div class="label">5ì  ë§Œì </div>
</div>
<div class="stat-card">
<h3>í™œì„± ì„¸ì…˜</h3>
<div class="num" id="sessionCount">0</div>
<div class="label">í˜„ì¬ ëŒ€í™” ì¤‘</div>
</div>
</div>
<div class="filters">
<h2>ğŸ” í•„í„°</h2>
<div class="filter-row">
<select id="filterType">
<option value="">ì „ì²´ ìœ í˜•</option>
<option value="ë°˜í’ˆ/êµí™˜">ë°˜í’ˆ/êµí™˜</option>
<option value="ì ë¦½ê¸ˆ">ì ë¦½ê¸ˆ</option>
<option value="ì¼ë°˜ë¬¸ì˜">ì¼ë°˜ë¬¸ì˜</option>
<option value="rating">ë§Œì¡±ë„ í‰ê°€</option>
</select>
<input type="date" id="filterDate">
<input type="text" id="filterSession" placeholder="ì„¸ì…˜ ID ê²€ìƒ‰">
<button onclick="applyFilter()">ê²€ìƒ‰</button>
<button class="secondary" onclick="resetFilter()">ì´ˆê¸°í™”</button>
</div>
</div>
<div class="export-all">
<button class="btn btn-primary" onclick="exportAll()">ğŸ“¥ ì „ì²´ ë‚´ì—­ ë‹¤ìš´ë¡œë“œ</button>
<button class="btn btn-secondary" onclick="clearAll()">ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ</button>
</div>
<div class="inquiries">
<div class="inq-header">
<h2>ğŸ“‹ ë¬¸ì˜ ë‚´ì—­</h2>
<span class="count" id="listCount">0ê±´</span>
</div>
<div id="inquiryList"></div>
</div>
</div>
<script>
var inquiries=[];
var filtered=[];
function loadInquiries(){
try{
var saved=localStorage.getItem('cb_inquiries');
if(saved){
inquiries=JSON.parse(saved);
filtered=inquiries;
}
}catch(e){
console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨',e);
}
updateStats();
renderList();
}
function updateStats(){
document.getElementById('totalCount').textContent=inquiries.length;
var today=new Date().toISOString().split('T')[0];
var todayInqs=inquiries.filter(function(inq){
return inq.timestamp&&inq.timestamp.split('T')[0]===today;
});
document.getElementById('todayCount').textContent=todayInqs.length;
var ratings=inquiries.filter(function(inq){
return inq.type==='rating'&&inq.rating;
});
if(ratings.length>0){
var sum=0;
for(var i=0;i<ratings.length;i++){
sum+=parseInt(ratings[i].rating);
}
document.getElementById('avgRating').textContent=(sum/ratings.length).toFixed(1);
}else{
document.getElementById('avgRating').textContent='-';
}
var sessions={};
for(var i=0;i<inquiries.length;i++){
if(inquiries[i].sessionId){
sessions[inquiries[i].sessionId]=true;
}
}
document.getElementById('sessionCount').textContent=Object.keys(sessions).length;
}
function renderList(){
var list=document.getElementById('inquiryList');
document.getElementById('listCount').textContent=filtered.length+'ê±´';
if(filtered.length===0){
list.innerHTML='<div class="empty">'+
'<div class="empty-icon">ğŸ“­</div>'+
'<p>ë¬¸ì˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
return;
}
var sorted=filtered.slice().sort(function(a,b){
return new Date(b.timestamp)-new Date(a.timestamp);
});
var html='';
for(var i=0;i<sorted.length;i++){
var inq=sorted[i];
var typeClass='gen';
var typeText='ì¼ë°˜';
if(inq.type==='ë°˜í’ˆ/êµí™˜'){
typeClass='ret';
typeText='ë°˜í’ˆ/êµí™˜';
}else if(inq.type==='ì ë¦½ê¸ˆ'){
typeClass='mile';
typeText='ì ë¦½ê¸ˆ';
}else if(inq.type==='ë°°ì†¡'){
typeClass='ship';
typeText='ë°°ì†¡';
}else if(inq.type==='rating'){
typeClass='rating';
typeText='ë§Œì¡±ë„ '+inq.rating+'ì ';
}
var time=new Date(inq.timestamp).toLocaleString('ko-KR');
html+='<div class="inq-item" onclick="toggleInq('+i+')" id="inq'+i+'">'+
'<div class="inq-top">'+
'<div>'+
'<span class="inq-type '+typeClass+'">'+typeText+'</span>'+
'<span class="inq-session">'+inq.sessionId.substr(0,15)+'...</span>'+
'</div>'+
'<div class="inq-time">'+time+'</div>'+
'</div>'+
'<div class="inq-data">';
if(inq.order){
html+='<div class="inq-data-row"><strong>ì£¼ë¬¸ë²ˆí˜¸:</strong>'+inq.order+'</div>';
}
if(inq.phone){
html+='<div class="inq-data-row"><strong>ì—°ë½ì²˜:</strong>'+inq.phone+'</div>';
}
if(inq.reason){
html+='<div class="inq-data-row"><strong>ì‚¬ìœ :</strong>'+inq.reason+'</div>';
}
if(inq.detail){
html+='<div class="inq-data-row"><strong>ìƒì„¸:</strong>'+inq.detail+'</div>';
}
if(inq.category){
html+='<div class="inq-data-row"><strong>ì¹´í…Œê³ ë¦¬:</strong>'+inq.category+'</div>';
}
if(inq.inquiry){
html+='<div class="inq-data-row"><strong>ë¬¸ì˜:</strong>'+inq.inquiry+'</div>';
}
if(inq.rating){
html+='<div class="inq-data-row"><strong>í‰ì :</strong>'+inq.rating+'/5ì </div>';
}
if(inq.history&&inq.history.length>0){
html+='<div class="inq-history">'+
'<div class="inq-history-title">ëŒ€í™” ë‚´ì—­ ('+inq.history.length+'ê°œ ë©”ì‹œì§€)</div>';
for(var j=0;j<inq.history.length&&j<10;j++){
var h=inq.history[j];
var msgText=h.msg.replace(/<[^>]*>/g,'').substr(0,100);
html+='<div class="inq-msg '+h.type+'">'+
'['+h.time+'] '+msgText+
'</div>';
}
if(inq.history.length>10){
html+='<div style="text-align:center;font-size:12px;color:#999;margin-top:10px">'+
'... ì™¸ '+(inq.history.length-10)+'ê°œ ë©”ì‹œì§€</div>';
}
html+='</div>';
}
html+='<div class="actions">'+
'<button class="btn btn-primary" onclick="event.stopPropagation();exportOne('+i+')">ë‹¤ìš´ë¡œë“œ</button>'+
'<button class="btn btn-secondary" onclick="event.stopPropagation();deleteOne('+i+')">ì‚­ì œ</button>'+
'</div>';
html+='</div></div>';
}
list.innerHTML=html;
}
function toggleInq(idx){
var el=document.getElementById('inq'+idx);
if(el.className.indexOf('expanded')>-1){
el.className='inq-item';
}else{
el.className='inq-item expanded';
}
}
function applyFilter(){
var type=document.getElementById('filterType').value;
var date=document.getElementById('filterDate').value;
var session=document.getElementById('filterSession').value;
filtered=inquiries.filter(function(inq){
if(type&&inq.type!==type)return false;
if(date&&inq.timestamp.split('T')[0]!==date)return false;
if(session&&inq.sessionId.indexOf(session)===-1)return false;
return true;
});
renderList();
}
function resetFilter(){
document.getElementById('filterType').value='';
document.getElementById('filterDate').value='';
document.getElementById('filterSession').value='';
filtered=inquiries;
renderList();
}
function exportOne(idx){
var inq=filtered[idx];
var txt='PRESSCO21 ë¬¸ì˜ ë‚´ì—­\n\n';
txt+='ìœ í˜•: '+inq.type+'\n';
txt+='ì„¸ì…˜ ID: '+inq.sessionId+'\n';
txt+='ì¼ì‹œ: '+new Date(inq.timestamp).toLocaleString()+'\n\n';
if(inq.order)txt+='ì£¼ë¬¸ë²ˆí˜¸: '+inq.order+'\n';
if(inq.phone)txt+='ì—°ë½ì²˜: '+inq.phone+'\n';
if(inq.reason)txt+='ì‚¬ìœ : '+inq.reason+'\n';
if(inq.detail)txt+='ìƒì„¸: '+inq.detail+'\n';
if(inq.rating)txt+='í‰ì : '+inq.rating+'/5\n';
if(inq.history&&inq.history.length>0){
txt+='\nëŒ€í™” ë‚´ì—­:\n';
for(var i=0;i<inq.history.length;i++){
var h=inq.history[i];
txt+='['+h.time+'] '+(h.type==='bot'?'ë´‡':'ê³ ê°')+': '+h.msg.replace(/<[^>]*>/g,'')+'\n';
}
}
var blob=new Blob([txt],{type:'text/plain;charset=utf-8'});
var url=URL.createObjectURL(blob);
var a=document.createElement('a');
a.href=url;
a.download='ë¬¸ì˜_'+inq.sessionId.substr(0,10)+'_'+Date.now()+'.txt';
a.click();
}
function deleteOne(idx){
if(confirm('ì´ ë¬¸ì˜ ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
var inq=filtered[idx];
var origIdx=inquiries.indexOf(inq);
if(origIdx>-1){
inquiries.splice(origIdx,1);
localStorage.setItem('cb_inquiries',JSON.stringify(inquiries));
filtered=inquiries;
updateStats();
renderList();
}
}
}
function exportAll(){
if(inquiries.length===0){
alert('ë‹¤ìš´ë¡œë“œí•  ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.');
return;
}
var txt='PRESSCO21 ì „ì²´ ë¬¸ì˜ ë‚´ì—­\n';
txt+='ìƒì„±ì¼: '+new Date().toLocaleString()+'\n';
txt+='ì´ '+inquiries.length+'ê±´\n\n';
txt+='================================================\n\n';
for(var i=0;i<inquiries.length;i++){
var inq=inquiries[i];
txt+='['+(i+1)+'] '+inq.type+'\n';
txt+='ì„¸ì…˜: '+inq.sessionId+'\n';
txt+='ì¼ì‹œ: '+new Date(inq.timestamp).toLocaleString()+'\n';
if(inq.order)txt+='ì£¼ë¬¸ë²ˆí˜¸: '+inq.order+'\n';
if(inq.phone)txt+='ì—°ë½ì²˜: '+inq.phone+'\n';
if(inq.reason)txt+='ì‚¬ìœ : '+inq.reason+'\n';
if(inq.rating)txt+='í‰ì : '+inq.rating+'/5\n';
txt+='\n';
}
var blob=new Blob([txt],{type:'text/plain;charset=utf-8'});
var url=URL.createObjectURL(blob);
var a=document.createElement('a');
a.href=url;
a.download='ì „ì²´ë¬¸ì˜ë‚´ì—­_'+Date.now()+'.txt';
a.click();
}
function clearAll(){
if(confirm('âš ï¸ ëª¨ë“  ë¬¸ì˜ ë‚´ì—­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')){
if(confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
localStorage.removeItem('cb_inquiries');
inquiries=[];
filtered=[];
updateStats();
renderList();
alert('ëª¨ë“  ë‚´ì—­ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
}
}
}
loadInquiries();
setInterval(function(){
loadInquiries();
},10000);
</script>
</body>
</html>

